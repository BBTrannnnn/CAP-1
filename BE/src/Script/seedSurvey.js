import mongoose from 'mongoose';
import { Question, HabitSuggestion } from '../models/Survey.js';
import { HabitTemplate } from '../models/Habit.js';
import dotenv from 'dotenv';
import connectDB from '../config/database.js';
dotenv.config();

// Connect to MongoDB

// Survey Questions
const surveyQuestions = [
  {
    id: 'health_1',
    text: 'M·ª©c ƒë·ªô ho·∫°t ƒë·ªông th·ªÉ ch·∫•t hi·ªán t·∫°i c·ªßa b·∫°n nh∆∞ th·∫ø n√†o?',
    type: 'single',
    category: 'health',
    options: [
      { id: 'h1_1', text: 'R·∫•t th·∫•p (hi·∫øm khi t·∫≠p)', value: 1 },
      { id: 'h1_2', text: 'Th·∫•p (1-2 l·∫ßn/tu·∫ßn)', value: 2 },
      { id: 'h1_3', text: 'Trung b√¨nh (3-4 l·∫ßn/tu·∫ßn)', value: 3 },
      { id: 'h1_4', text: 'Cao (5+ l·∫ßn/tu·∫ßn)', value: 4 }
    ]
  },
  {
    id: 'health_2',
    text: 'Ch·∫•t l∆∞·ª£ng gi·∫•c ng·ªß c·ªßa b·∫°n nh∆∞ th·∫ø n√†o?',
    type: 'single',
    category: 'health',
    options: [
      { id: 'h2_1', text: 'K√©m (d∆∞·ªõi 6 ti·∫øng)', value: 1 },
      { id: 'h2_2', text: 'Kh√° (6-7 ti·∫øng)', value: 2 },
      { id: 'h2_3', text: 'T·ªët (7-8 ti·∫øng)', value: 3 },
      { id: 'h2_4', text: 'Xu·∫•t s·∫Øc (tr√™n 8 ti·∫øng)', value: 4 }
    ]
  },
  {
    id: 'productivity_1',
    text: 'B·∫°n qu·∫£n l√Ω c√¥ng vi·ªác h·∫±ng ng√†y nh∆∞ th·∫ø n√†o?',
    type: 'single',
    category: 'productivity',
    options: [
      { id: 'p1_1', text: 'Th∆∞·ªùng c·∫£m th·∫•y qu√° t·∫£i', value: 1 },
      { id: 'p1_2', text: 'Qu·∫£n l√Ω ƒë∆∞·ª£c nh∆∞ng c√≥ th·ªÉ t·ªët h∆°n', value: 2 },
      { id: 'p1_3', text: 'C√≥ h·ªá th·ªëng t·ªï ch·ª©c t·ªët', value: 3 },
      { id: 'p1_4', text: 'R·∫•t c√≥ t·ªï ch·ª©c v√† hi·ªáu qu·∫£', value: 4 }
    ]
  },
  {
    id: 'learning_1',
    text: 'B·∫°n c√≥ th∆∞·ªùng xuy√™n h·ªçc h·ªèi ƒëi·ªÅu m·ªõi kh√¥ng?',
    type: 'single',
    category: 'learning',
    options: [
      { id: 'l1_1', text: 'Hi·∫øm khi', value: 1 },
      { id: 'l1_2', text: 'Th·ªânh tho·∫£ng', value: 2 },
      { id: 'l1_3', text: 'Th∆∞·ªùng xuy√™n', value: 3 },
      { id: 'l1_4', text: 'H·∫±ng ng√†y', value: 4 }
    ]
  },
  {
    id: 'mindful_1',
    text: 'B·∫°n qu·∫£n l√Ω stress nh∆∞ th·∫ø n√†o?',
    type: 'single',
    category: 'mindful',
    options: [
      { id: 'm1_1', text: 'Kh√≥ ki·ªÉm so√°t stress', value: 1 },
      { id: 'm1_2', text: 'C√≥ m·ªôt v√†i c√°ch ƒë·ªëi ph√≥', value: 2 },
      { id: 'm1_3', text: 'Qu·∫£n l√Ω stress kh√° t·ªët', value: 3 },
      { id: 'm1_4', text: 'R·∫•t t·ªët trong vi·ªác th∆∞ gi√£n', value: 4 }
    ]
  },
  {
    id: 'finance_1',
    text: 'T√¨nh h√¨nh t√†i ch√≠nh c√° nh√¢n c·ªßa b·∫°n?',
    type: 'single',
    category: 'finance',
    options: [
      { id: 'f1_1', text: 'Kh√¥ng theo d√µi chi ti√™u', value: 1 },
      { id: 'f1_2', text: 'Theo d√µi nh∆∞ng ch∆∞a c√≥ k·∫ø ho·∫°ch', value: 2 },
      { id: 'f1_3', text: 'C√≥ ng√¢n s√°ch v√† ti·∫øt ki·ªám', value: 3 },
      { id: 'f1_4', text: 'Qu·∫£n l√Ω t√†i ch√≠nh r·∫•t t·ªët', value: 4 }
    ]
  }
];

// Habit Templates
const habitTemplates = [
  // Health
  {
    name: 'U·ªëng 8 ly n∆∞·ªõc m·ªói ng√†y',
    description: 'Duy tr√¨ ƒë·ªß n∆∞·ªõc cho c∆° th·ªÉ ƒë·ªÉ c·∫£i thi·ªán s·ª©c kh·ªèe t·ªïng th·ªÉ',
    category: 'health',
    defaultIcon: 'üíß',
    defaultColor: '#3B82F6',
    suggestedFrequency: 'daily',
    difficulty: 'easy',
    estimatedTime: 5,
    tips: ['ƒê·∫∑t chai n∆∞·ªõc tr√™n b√†n l√†m vi·ªác', 'U·ªëng n∆∞·ªõc ngay khi th·ª©c d·∫≠y', 'D√πng app nh·∫Øc nh·ªü'],
    benefits: ['C·∫£i thi·ªán l√†n da', 'TƒÉng nƒÉng l∆∞·ª£ng', 'H·ªó tr·ª£ ti√™u h√≥a'],
    isPopular: true
  },
  {
    name: 'ƒÇn 5 ph·∫ßn rau qu·∫£ m·ªói ng√†y',
    description: 'B·ªï sung vitamin v√† ch·∫•t x∆° c·∫ßn thi·∫øt cho c∆° th·ªÉ',
    category: 'health',
    defaultIcon: 'ü•¨',
    defaultColor: '#22C55E',
    difficulty: 'medium',
    estimatedTime: 15,
    tips: ['Chu·∫©n b·ªã tr√°i c√¢y s·∫µn', 'Th√™m rau v√†o m·ªói b·ªØa ƒÉn'],
    benefits: ['TƒÉng c∆∞·ªùng mi·ªÖn d·ªãch', 'C·∫£i thi·ªán ti√™u h√≥a'],
    isPopular: true
  },
  {
    name: 'Ki·ªÉm tra s·ª©c kh·ªèe ƒë·ªãnh k·ª≥',
    description: 'ThƒÉm kh√°m s·ª©c kh·ªèe t·ªïng qu√°t ƒë·ªãnh k·ª≥ ƒë·ªÉ ph√°t hi·ªán s·ªõm b·ªánh t·∫≠t',
    category: 'health',
    defaultIcon: 'üè•',
    defaultColor: '#EF4444',
    suggestedFrequency: 'monthly',
    difficulty: 'easy',
    estimatedTime: 120,
    benefits: ['Ph√°t hi·ªán s·ªõm b·ªánh t·∫≠t', 'An t√¢m v·ªÅ s·ª©c kh·ªèe']
  },

  // Fitness
  {
    name: 'T·∫≠p th·ªÉ d·ª•c 30 ph√∫t',
    description: 'Duy tr√¨ ho·∫°t ƒë·ªông th·ªÉ ch·∫•t ƒë·ªÉ kh·ªèe m·∫°nh v√† c√≥ nƒÉng l∆∞·ª£ng',
    category: 'fitness',
    defaultIcon: 'üèÉ',
    defaultColor: '#F59E0B',
    difficulty: 'medium',
    estimatedTime: 30,
    tips: ['B·∫Øt ƒë·∫ßu v·ªõi 10 ph√∫t', 'Ch·ªçn ho·∫°t ƒë·ªông y√™u th√≠ch', 'T·∫≠p c√πng b·∫°n b√®'],
    benefits: ['TƒÉng s·ª©c b·ªÅn', 'C·∫£i thi·ªán t√¢m tr·∫°ng', 'Gi·∫£m c√¢n'],
    isPopular: true
  },
  {
    name: 'ƒêi b·ªô 10,000 b∆∞·ªõc',
    description: 'Duy tr√¨ ho·∫°t ƒë·ªông ƒëi b·ªô ƒë·ªÉ c·∫£i thi·ªán s·ª©c kh·ªèe tim m·∫°ch',
    category: 'fitness',
    defaultIcon: 'üëü',
    defaultColor: '#6366F1',
    difficulty: 'easy',
    estimatedTime: 60,
    tips: ['S·ª≠ d·ª•ng c·∫ßu thang thay v√¨ thang m√°y', 'ƒêi b·ªô khi n√≥i chuy·ªán ƒëi·ªán tho·∫°i'],
    benefits: ['C·∫£i thi·ªán s·ª©c kh·ªèe tim m·∫°ch', 'ƒê·ªët ch√°y calories']
  },
  {
    name: 'T·∫≠p yoga bu·ªïi s√°ng',
    description: 'B·∫Øt ƒë·∫ßu ng√†y m·ªõi v·ªõi yoga ƒë·ªÉ th∆∞ gi√£n v√† linh ho·∫°t',
    category: 'fitness',
    defaultIcon: 'üßò',
    defaultColor: '#8B5CF6',
    difficulty: 'easy',
    estimatedTime: 15,
    benefits: ['TƒÉng ƒë·ªô linh ho·∫°t', 'Gi·∫£m stress', 'C·∫£i thi·ªán t∆∞ th·∫ø']
  },

  // Learning
  {
    name: 'ƒê·ªçc s√°ch 20 ph√∫t',
    description: 'Duy tr√¨ th√≥i quen ƒë·ªçc s√°ch ƒë·ªÉ m·ªü r·ªông ki·∫øn th·ª©c',
    category: 'learning',
    defaultIcon: 'üìö',
    defaultColor: '#10B981',
    difficulty: 'easy',
    estimatedTime: 20,
    tips: ['ƒê·ªçc tr∆∞·ªõc khi ng·ªß', 'Ch·ªçn s√°ch y√™u th√≠ch', 'Ghi ch√∫ √Ω t∆∞·ªüng hay'],
    benefits: ['M·ªü r·ªông ki·∫øn th·ª©c', 'C·∫£i thi·ªán t·∫≠p trung', 'Gi·∫£m stress'],
    isPopular: true
  },
  {
    name: 'H·ªçc ngo·∫°i ng·ªØ 15 ph√∫t',
    description: 'H·ªçc m·ªôt ng√¥n ng·ªØ m·ªõi m·ªói ng√†y ƒë·ªÉ ph√°t tri·ªÉn b·∫£n th√¢n',
    category: 'learning',
    defaultIcon: 'üåê',
    defaultColor: '#EC4899',
    difficulty: 'medium',
    estimatedTime: 15,
    tips: ['D√πng app h·ªçc ng√¥n ng·ªØ', 'Nghe nh·∫°c/xem phim b·∫±ng ng√¥n ng·ªØ ƒë√≥'],
    benefits: ['M·ªü r·ªông c∆° h·ªôi ngh·ªÅ nghi·ªáp', 'K√≠ch th√≠ch tr√≠ n√£o']
  },

  // Mindful
  {
    name: 'Thi·ªÅn 10 ph√∫t',
    description: 'Th·ª±c h√†nh thi·ªÅn ƒë·ªãnh ƒë·ªÉ gi·∫£m stress v√† tƒÉng c∆∞·ªùng t·∫≠p trung',
    category: 'mindful',
    defaultIcon: 'üßò',
    defaultColor: '#8B5CF6',
    difficulty: 'medium',
    estimatedTime: 10,
    tips: ['T√¨m n∆°i y√™n tƒ©nh', 'S·ª≠ d·ª•ng app h∆∞·ªõng d·∫´n thi·ªÅn', 'Thi·ªÅn v√†o c√πng gi·ªù m·ªói ng√†y'],
    benefits: ['Gi·∫£m stress', 'C·∫£i thi·ªán t·∫≠p trung', 'TƒÉng c∆∞·ªùng h·∫°nh ph√∫c'],
    isPopular: true
  },
  {
    name: 'Vi·∫øt nh·∫≠t k√Ω bi·∫øt ∆°n',
    description: 'Ghi l·∫°i 3 ƒëi·ªÅu bi·∫øt ∆°n m·ªói ng√†y ƒë·ªÉ tƒÉng c∆∞·ªùng t√≠ch c·ª±c',
    category: 'mindful',
    defaultIcon: 'üìù',
    defaultColor: '#F59E0B',
    difficulty: 'easy',
    estimatedTime: 5,
    tips: ['Vi·∫øt v√†o bu·ªïi t·ªëi', 'Ghi chi ti·∫øt c·∫£m x√∫c', 'ƒê·ªçc l·∫°i khi bu·ªìn'],
    benefits: ['TƒÉng c∆∞·ªùng t√≠ch c·ª±c', 'C·∫£i thi·ªán t√¢m tr·∫°ng']
  },

  // Finance
  {
    name: 'Theo d√µi chi ti√™u h√†ng ng√†y',
    description: 'Ghi ch√©p t·∫•t c·∫£ chi ti√™u ƒë·ªÉ qu·∫£n l√Ω t√†i ch√≠nh t·ªët h∆°n',
    category: 'finance',
    defaultIcon: 'üí∞',
    defaultColor: '#22C55E',
    difficulty: 'easy',
    estimatedTime: 5,
    tips: ['D√πng app qu·∫£n l√Ω t√†i ch√≠nh', 'Ch·ª•p ·∫£nh h√≥a ƒë∆°n', 'Xem l·∫°i cu·ªëi tu·∫ßn'],
    benefits: ['Ki·ªÉm so√°t chi ti√™u', 'Ti·∫øt ki·ªám ti·ªÅn']
  },
  {
    name: 'Ti·∫øt ki·ªám 50,000ƒë m·ªói ng√†y',
    description: 'ƒê·ªÉ d√†nh m·ªôt kho·∫£n nh·ªè m·ªói ng√†y ƒë·ªÉ x√¢y d·ª±ng qu·ªπ d·ª± ph√≤ng',
    category: 'finance',
    defaultIcon: 'üè¶',
    defaultColor: '#10B981',
    difficulty: 'medium',
    estimatedTime: 2,
    benefits: ['X√¢y d·ª±ng qu·ªπ d·ª± ph√≤ng', 'T·∫°o th√≥i quen ti·∫øt ki·ªám']
  },

  // Digital
  {
    name: 'H·∫°n ch·∫ø social media',
    description: 'Gi·∫£m th·ªùi gian l∆∞·ªõt m·∫°ng x√£ h·ªôi xu·ªëng d∆∞·ªõi 1 ti·∫øng/ng√†y',
    category: 'digital',
    defaultIcon: 'üì±',
    defaultColor: '#EF4444',
    difficulty: 'hard',
    estimatedTime: 60,
    tips: ['T·∫Øt th√¥ng b√°o kh√¥ng c·∫ßn thi·∫øt', 'ƒê·ªÉ ƒëi·ªán tho·∫°i xa khi l√†m vi·ªác'],
    benefits: ['TƒÉng t·∫≠p trung', 'C√≥ th√™m th·ªùi gian cho vi·ªác kh√°c']
  },
  {
    name: 'T·∫Øt ƒëi·ªán tho·∫°i tr∆∞·ªõc khi ng·ªß 1 ti·∫øng',
    description: 'Ng·ª´ng s·ª≠ d·ª•ng thi·∫øt b·ªã ƒëi·ªán t·ª≠ tr∆∞·ªõc gi·ªù ng·ªß ƒë·ªÉ c·∫£i thi·ªán gi·∫•c ng·ªß',
    category: 'digital',
    defaultIcon: 'üåô',
    defaultColor: '#6B7280',
    difficulty: 'medium',
    estimatedTime: 5,
    benefits: ['C·∫£i thi·ªán ch·∫•t l∆∞·ª£ng gi·∫•c ng·ªß', 'Gi·∫£m cƒÉng th·∫≥ng m·∫Øt']
  },

  // Social
  {
    name: 'G·ªçi ƒëi·ªán cho gia ƒë√¨nh',
    description: 'Duy tr√¨ li√™n l·∫°c v·ªõi gia ƒë√¨nh ƒë·ªÉ c·ªßng c·ªë m·ªëi quan h·ªá',
    category: 'social',
    defaultIcon: 'üìû',
    defaultColor: '#EC4899',
    suggestedFrequency: 'weekly',
    difficulty: 'easy',
    estimatedTime: 15,
    benefits: ['C·ªßng c·ªë m·ªëi quan h·ªá gia ƒë√¨nh', 'Chia s·∫ª c·∫£m x√∫c']
  },
  {
    name: 'G·∫∑p g·ª° b·∫°n b√®',
    description: 'D√†nh th·ªùi gian g·∫∑p m·∫∑t b·∫°n b√® ƒë·ªÉ duy tr√¨ t√¨nh b·∫°n',
    category: 'social',
    defaultIcon: 'üë•',
    defaultColor: '#F59E0B',
    suggestedFrequency: 'weekly',
    difficulty: 'easy',
    estimatedTime: 120,
    benefits: ['Duy tr√¨ t√¨nh b·∫°n', 'Gi·∫£m cƒÉng th·∫≥ng']
  },

  // Sleep
  {
    name: 'Ng·ªß ƒë√∫ng gi·ªù (11 PM)',
    description: 'Duy tr√¨ gi·ªù gi·∫•c ng·ªß ƒë·ªÅu ƒë·∫∑n ƒë·ªÉ c·∫£i thi·ªán s·ª©c kh·ªèe',
    category: 'sleep',
    defaultIcon: 'üò¥',
    defaultColor: '#6366F1',
    difficulty: 'medium',
    estimatedTime: 480,
    tips: ['T·∫°o th√≥i quen tr∆∞·ªõc khi ng·ªß', 'Tr√°nh caffeine bu·ªïi chi·ªÅu'],
    benefits: ['C·∫£i thi·ªán ch·∫•t l∆∞·ª£ng gi·∫•c ng·ªß', 'TƒÉng nƒÉng l∆∞·ª£ng']
  },
  {
    name: 'Ng·ªß ƒë·ªß 8 ti·∫øng',
    description: 'ƒê·∫£m b·∫£o c√≥ ƒë·ªß gi·∫•c ng·ªß ƒë·ªÉ ph·ª•c h·ªìi c∆° th·ªÉ',
    category: 'sleep',
    defaultIcon: 'üõå',
    defaultColor: '#8B5CF6',
    difficulty: 'medium',
    estimatedTime: 480,
    benefits: ['Ph·ª•c h·ªìi c∆° th·ªÉ', 'C·∫£i thi·ªán tr√≠ nh·ªõ']
  },

  // Energy
  {
    name: 'U·ªëng tr√† xanh thay c√† ph√™',
    description: 'Thay th·∫ø c√† ph√™ b·∫±ng tr√† xanh ƒë·ªÉ c√≥ nƒÉng l∆∞·ª£ng b·ªÅn v·ªØng',
    category: 'energy',
    defaultIcon: 'üçµ',
    defaultColor: '#22C55E',
    difficulty: 'easy',
    estimatedTime: 5,
    benefits: ['NƒÉng l∆∞·ª£ng ·ªïn ƒë·ªãnh', 'Ch·ªëng oxy h√≥a']
  },
  {
    name: 'Ngh·ªâ ng∆°i gi·ªØa gi·ªù l√†m vi·ªác',
    description: 'Ngh·ªâ ng∆°i 5-10 ph√∫t sau m·ªói gi·ªù l√†m vi·ªác ƒë·ªÉ tr√°nh ki·ªát s·ª©c',
    category: 'energy',
    defaultIcon: '‚è∞',
    defaultColor: '#F59E0B',
    difficulty: 'easy',
    estimatedTime: 10,
    tips: ['ƒê·∫∑t timer nh·∫Øc nh·ªü', 'ƒê·ª©ng d·∫≠y v√† v·∫≠n ƒë·ªông nh·∫π'],
    benefits: ['Duy tr√¨ nƒÉng l∆∞·ª£ng', 'TƒÉng hi·ªáu su·∫•t l√†m vi·ªác']
  }
];

// Habit Suggestions (from survey analysis)
const habitSuggestions = [
  {
    name: 'T·∫≠p th·ªÉ d·ª•c bu·ªïi s√°ng',
    description: 'B·∫Øt ƒë·∫ßu ng√†y v·ªõi 20 ph√∫t t·∫≠p th·ªÉ d·ª•c nh·∫π',
    category: 'health',
    difficulty: 'easy',
    frequency: 'daily',
    estimatedTime: 20,
    icon: 'üèÉ',
    color: '#F59E0B',
    tags: ['morning', 'exercise', 'energy'],
    requiredScore: 0,
    targetPersonas: ['health-focused', 'balanced-lifestyle']
  },
  {
    name: 'S·ª≠ d·ª•ng k·ªπ thu·∫≠t Pomodoro',
    description: 'L√†m vi·ªác t·∫≠p trung 25 ph√∫t, ngh·ªâ 5 ph√∫t',
    category: 'productivity',
    difficulty: 'medium',
    frequency: 'daily',
    estimatedTime: 30,
    icon: '‚è∞',
    color: '#EF4444',
    tags: ['focus', 'productivity', 'time-management'],
    requiredScore: 2,
    targetPersonas: ['productivity-driven']
  },
  {
    name: 'ƒê·ªçc s√°ch chuy√™n m√¥n',
    description: 'D√†nh 30 ph√∫t m·ªói ng√†y ƒë·ªÉ ƒë·ªçc s√°ch ph√°t tri·ªÉn k·ªπ nƒÉng',
    category: 'learning',
    difficulty: 'medium',
    frequency: 'daily',
    estimatedTime: 30,
    icon: 'üìö',
    color: '#10B981',
    tags: ['learning', 'skill', 'career'],
    requiredScore: 1,
    targetPersonas: ['knowledge-seeker', 'productivity-driven']
  }
];

// Seed functions
async function seedSurveyQuestions() {
  try {
    await Question.deleteMany({});
    await Question.insertMany(surveyQuestions);
    console.log('‚úÖ Survey questions seeded successfully');
  } catch (error) {
    console.error('‚ùå Error seeding survey questions:', error);
  }
}

async function seedHabitTemplates() {
  try {
    await HabitTemplate.deleteMany({});
    await HabitTemplate.insertMany(habitTemplates);
    console.log('‚úÖ Habit templates seeded successfully');
  } catch (error) {
    console.error('‚ùå Error seeding habit templates:', error);
  }
}

async function seedHabitSuggestions() {
  try {
    await HabitSuggestion.deleteMany({});
    await HabitSuggestion.insertMany(habitSuggestions);
    console.log('‚úÖ Habit suggestions seeded successfully');
  } catch (error) {
    console.error('‚ùå Error seeding habit suggestions:', error);
  }
}

// Main seed function
async function seedAll() {
  await connectDB();
  
  console.log('üå± Starting to seed data...');
  await seedSurveyQuestions();
  await seedHabitTemplates();
  await seedHabitSuggestions();
  console.log('üéâ All data seeded successfully!');
  
  process.exit(0);
}

// Export individual functions
export {
    seedSurveyQuestions,
    seedHabitTemplates,
    seedHabitSuggestions,
    seedAll
};

// Run if called directly
if (process.argv[1].endsWith('seedSurvey.js')) {
    seedAll();
}